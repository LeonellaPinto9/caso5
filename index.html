<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de contacto</title>
    <script>
        function enviarFormulario() {
            var nombre = document.getElementById('nombre').value;
            var email = document.getElementById('email').value;
            var asunto = document.getElementById('asunto').value;
            var mensaje = document.getElementById('mensaje').value;

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        var respuesta = JSON.parse(xhr.responseText);
                        if (respuesta.success) {
                            document.getElementById('resultado').innerHTML = respuesta.message;
                        } else {
                            document.getElementById('resultado').innerHTML = respuesta.message;
                        }
                    } else {
                        document.getElementById('resultado').innerHTML = 'Error al enviar el formulario.';
                    }
                }
            };
            xhr.open('POST', 'controllers/contact.php', true);
            xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            xhr.send('nombre=' + encodeURIComponent(nombre) + '&email=' + encodeURIComponent(email) + '&asunto=' + encodeURIComponent(asunto) + '&mensaje=' + encodeURIComponent(mensaje));
        }
    </script>
</head>

<body>
    <h2>Formulario de contacto</h2>
    <form>
        <fieldset>
            <legend>Informacion personal</legend>
            <label>Nombre:
                <input type="text" id="nombre" placeholder="Luis Angel Lopez" required />
            </label>
            <label>Email:
                <input type="email" id="email" placeholder="ejemplo@email.com" required />
            </label>
        </fieldset>

        <fieldset>
            <legend>Asunto</legend>
            <label>Asunto:
                <input type='text' id="asunto" placeholder="Escriba el asunto" required />
            </label>
        </fieldset>

        <fieldset>
            <legend>Informacion adicional</legend>
            <label>Mensaje:
                <textarea id="mensaje" placeholder="Escriba su consulta u opinion." required></textarea>
            </label>
        </fieldset>

        <button type="button" onclick="enviarFormulario()">Enviar</button>
    </form>
    <div id="resultado"></div>
</body>

</html>